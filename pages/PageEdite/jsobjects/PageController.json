{
  "unpublishedCollection": {
    "name": "PageController",
    "pageId": "PageEdite",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tGetDivisionList: async function () {\n\t\tawait API_Get_Division.run();\n\t\tawait storeValue('divisionList', API_Get_Division.data, true);\n\t\tawait storeValue(\"divisionOptions\", PageLogic.MapSelectOptionList(API_Get_Division.data, \"Division\"), true);\n\t\tawait storeValue(\"currentConfigState\", \"\", true);\n\t\tawait storeValue(\"currentPositionIndex\", \"\", true);\n\t\tawait storeValue(\"hardwareConfig\", \"\", true);\n\t\tawait storeValue(\"softwareConfig\", \"\", true);\n\t\tawait storeValue(\"licenseConfig\", \"\", true);\n\t},\n\tGetPositionList: async function (divisionName) {\n\t\tif (divisionName == \"\") {\n\t\t\tawait storeValue(\"positionOptions\", [], true);\n\t\t\treturn;\n\t\t}\n\t\tlet positionList = appsmith.store.divisionList.filter((item) => {\n\t\t\treturn item.Division === divisionName;\n\t\t})[0].Position;\n\t\tawait storeValue(\"positionOptions\", PageLogic.MapSelectOptionList(positionList, \"name\"), true);\n\t},\n\tLoadPositionConfig: async function (division, position) {\n\t\tif (position === \"\") {\n\t\t\tawait storeValue(\"hardwareConfig\", \"\", true);\n\t\t\tawait storeValue(\"softwareConfig\", \"\", true);\n\t\t\tawait storeValue(\"licenseConfig\", \"\", true);\n\t\t\tconsole.log(`positionNotFound: config clear!`);\n\t\t\treturn;\n\t\t}\n\t\tawait APIGetConfig.run();\n\t\tlet configList = APIGetConfig.data.filter((version) => {\n\t\t\treturn version.version == 1;\n\t\t})[0];\n\t\tstoreValue(\"currentConfigState\", configList, true);\n\t\tconsole.log(configList);\n\t\tlet selectedPositionIndex = configList.authorizeMatrix.findIndex((item) => {\n\t\t\treturn item.Division == division && item.Position == position;\n\t\t});\n\t\tawait storeValue(\"currentPositionIndex\", selectedPositionIndex, true);\n\t\tlet selectedPositionConfig = configList.authorizeMatrix[selectedPositionIndex];\n\t\tlet hardwareConfig = selectedPositionConfig.Hardware;\n\t\tlet softwareConfig = selectedPositionConfig.Software;\n\t\tlet licenseConfig = selectedPositionConfig.License;\n\t\tstoreValue(\"hardwareConfig\", hardwareConfig, true);\n\t\tstoreValue(\"softwareConfig\", softwareConfig, true);\n\t\tstoreValue(\"licenseConfig\", licenseConfig, true);\n\t},\n\tFilterFieldConfig: async function (searchString) {\n\t\tlet selectedPositionIndex = appsmith.store.currentPositionIndex;\n\t\tlet configData = appsmith.store.currentConfigState;\n\t\tlet hardwareConfig = configData.authorizeMatrix[selectedPositionIndex].Hardware;\n\t\tlet softwareConfig = configData.authorizeMatrix[selectedPositionIndex].Software;\n\t\tlet licenseConfig = configData.authorizeMatrix[selectedPositionIndex].License;\n\t\tlet filteredHardwareConfig = await PageLogic.SearchSourceObject(hardwareConfig, searchString);\n\t\tlet filteredSoftwareConfig = await PageLogic.SearchSourceObject(softwareConfig, searchString);\n\t\tlet filteredLicenseConfig = await PageLogic.SearchSourceObject(licenseConfig, searchString);\n\t\tconsole.log(filteredHardwareConfig);\n\t\tconsole.log(filteredSoftwareConfig);\n\t\tconsole.log(filteredLicenseConfig);\n\t\tawait storeValue(\"hardwareConfig\", filteredHardwareConfig, true);\n\t\tawait storeValue(\"softwareConfig\", filteredSoftwareConfig, true);\n\t\tawait storeValue(\"licenseConfig\", filteredLicenseConfig, true);\n\t},\n\tSaveChangeToConfig1: async function () {\n\t\tif (appsmith.store.currentConfigState == \"\") {\n\t\t\tconsole.log(`firstloop`);\n\t\t\treturn;\n\t\t}\n\t\tlet formData = {\n\t\t\thardware: HardwareConfigForm.formData,\n\t\t\tsoftware: SoftwareConfigForm.formData,\n\t\t\tlicense: LicenseConfigForm.formData\n\t\t};\n\t\tlet currentVersionConfig = appsmith.store.currentConfigState;\n\t\tlet currentPositionIndex = appsmith.store.currentPositionIndex;\n\t\tlet currentPositionConfig = currentVersionConfig.authorizeMatrix[currentPositionIndex];\n\t\t//console.log(currentVersionConfig);\n\t\t//console.log(currentPositionIndex);\n\t\tconsole.log(currentPositionConfig);\n\t\tcurrentPositionConfig.Hardware = _.merge(currentPositionConfig.Hardware, formData.hardware);\n\t\tcurrentPositionConfig.Software = _.merge(currentPositionConfig.Software, formData.software);\n\t\tcurrentPositionConfig.License = _.merge(currentPositionConfig.License, formData.license);\n\t\tconsole.log(currentPositionConfig);\n\t},\n}",
    "variables": []
  },
  "id": "PageEdite_PageController",
  "deleted": false,
  "gitSyncId": "63282acf93ead37f152bc1d2_63282ad293ead37f152bc2c4"
}